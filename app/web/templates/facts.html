{% extends "base.html" %}

{% block title%}Facts{% endblock %}

<!-- For the Javascript code -->
{% block head %}

{% if statstype == "GAS" %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
google.charts.load('current', {
    'packages':['geochart', 'corechart'],
    // Note: you will need to get a mapsApiKey for your project.
    // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
    'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
  });
{% for gas in data.keys() %}

  // Display the charts
  google.charts.setOnLoadCallback({{"drawRegionsMap"+gas}});
  google.charts.setOnLoadCallback({{"drawHistogram"+gas}});

  function {{"drawHistogram"+gas}}() {
    var data = google.visualization.arrayToDataTable({{data[gas]['data']|tojson}});
      
    var histchart = new google.visualization.Histogram(document.getElementById('hist_div_{{gas}}'));
    var histoptions = {
      title: '{{gas}} emissions',
      legend: { position: 'none' },
      colors: ['{{data[gas]["colors"]}}'],
    }

    histchart.draw(data, histoptions);
    }

  function {{"drawRegionsMap"+gas}}() {
    var data = google.visualization.arrayToDataTable({{data[gas]['data']|tojson}});

    var geooptions = {
      title: '{{gas}} emissions',
      colorAxis: {colors: ['#FFFFFF', '{{data[gas]["colors"]}}']}
    };
    
    var geochart = new google.visualization.GeoChart(document.getElementById('regions_div_{{gas}}'));

    geochart.draw(data, geooptions);
  }
{% endfor %}
</script>

{% elif statstype == "PROTECTED_AREAS" %}

{% elif statstype == "RENEWABLE_RESSOURCES" %}

{% endif %}

{% endblock %}

{% block content %}

<section class="section bg-secondary">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h4>Facts</h4>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
  {% if statstype == "GAS" %}
  {% for gas in data.keys() %}
    <div class="row">
      <div class="col-12"><h4>{{gas}} emissions per capita</h4></div>
      <div class="col-8">
        <div id="regions_div_{{gas}}"></div>
      </div>
      <div class="col-lg-4" style="height: 100%;">
        <div id="hist_div_{{gas}}" style="height: 400px; width: 500px;"></div>
      </div>
    </div>
  {% endfor %}
  </div>

  {% elif statstype == "PROTECTED_AREAS" %}
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h4>Protected Areas (Terrestrial, Marine and Forest)</h4>
      </div>
    </div>
  </div>

  {% elif statstype == "RENEWABLE_RESSOURCES" %}
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h4>Renewable ressources (Electricity and Freshwater)</h4>
      </div>
    </div>
  </div>

  {% else %}
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h4>Nope</h4>
      </div>
    </div>
  </div>
  {% endif %}
</section>

{% endblock %}
